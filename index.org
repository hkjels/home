
#+title: Home
#+exclude_tags: noexport
#+options: toc:1

Welcome to my humble home. I like to keep it tidy just in case
someone extraordinary; such as yourself, come to visit.

#+html: <a title="link to repo" class="github" href="https://github.com/hkjels/home/"><img src="./images/github.png"></a>
#+html: <main>

* Up & running

My home relies heavily on Emacs to tangle code-blocks into sourcefiles
that can be installed. Evaluating the lines below in your terminal
will install [[https://brew.sh][Homebrew]] and [[https://emacs.org][Emacs]]. Once those are installed, it will
issue Emacs to do the rest.

#+begin_src shell
make install
#+end_src

* Makefile                                                           :noexport:

#+begin_src makefile :tangle Makefile
  .PHONY: install

  CFLAGS="-O2 -I/usr/local/opt/libgccjit/include"
  LDFLAGS="-L/usr/local/opt/libgccjit/lib/gcc/10"
  LD_LIBRARY_PATH="/usr/local/opt/libgccjit/lib/gcc/10"

  libexec="/usr/local/libexec/emacs/28.0.50"

  CURL=curl -fsSL
  TIC=tic -x
  EMACS="emacs "

  brew:
	  @type -p "$@" >/dev/null 2>&1 || $(CURL) "https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh"

  libiconv libgccjit expat: brew
	  @test -s "$(brew --prefix)y/opt/$@" || brew install $@

  emacs: libgccjit
	  @cd $@
	  @autogen.sh
	  @configure --with-json --with-nativecomp
	  @mkdir -p $libexec
	  @sudo chown $USER $libexec
	  @make
	  @make install

  /Applications/Emacs.app: emacs
	  @mv emacs/nextstep/Emacs.app $@

  .terminfo: terminfo-24bit
	  $(TIC) -o "$HOME/$@" $<

  install: /Applications/Emacs.app .terminfo
#+end_src

#+include: "src/shell.org"
#+include: "src/git.org"
#+include: "src/tmux.org"
#+include: "src/license.org"
#+html: </main>
